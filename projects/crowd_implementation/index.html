<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Swarm implementation to emulate a crowd | Shail Dalal Portfolio</title> <meta name="author" content="Shail Dalal"> <meta name="description" content="Multi Actor Systems"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sdalal1.github.io/projects/crowd_implementation/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Shail Dalal Portfolio</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Swarm implementation to emulate a crowd</h1> <p class="post-description">Multi Actor Systems</p> </header> <article> <h2 id="project">Project:</h2> <h5 id="description"><strong>Description:</strong></h5> <p>       The objective of this project was to create a swarm of dynamic obstacles for a Semi-autonomous wheelchair study. The swarm consisted of 3 cars and reacted to moving wheelchair in a region.</p> <h5 id="hardware-used"><strong>Hardware used:</strong></h5> <p>       The Hardware was developed for the first part of this project and can be looked at under the Dynamic Obstacles for Powered Wheelchair project. The Hardware consisted of three mecanum wheel cars which would react to the moving wheelchair in the environment.</p> <h5 id="software-created"><strong>Software Created:</strong></h5> <ol> <li> <strong>Social Forces Algorithm</strong> <ul> <li>Implemented the social forces algorithm which is modelled around crowd of humans. The basis of this algorithm revolves around the attraction and repulsion forces humans feel from their environment. The basic example of this is that someone walking in the crowd has a positive attractive force towards the goal location and would move in that general direction. In an opposite case, a human would feel a repulsive force from other humans, cars or anything else in the way towards the goal. My implementation revolves around this where each cars feels an attraction goal towards the goal location and a repulsion force between the other things in the environment. This includes other cars as well as the wheelchair. The wheelchair for my consideration doesn’t change its motion in respect to anything in the environment but is controlled in whatever way the human riding it controls it.</li> </ul> <p>The algorithm revolves around these forces which lead to change in the commanded twist. The functions are explained below:</p> <ul> <li> <strong>Repulsion Forces Calculation between two cars:</strong> <ul> <li>Parameters –&gt; <ul> <li>A - higher A leads to higher magnitude of repulsion forces</li> <li>B - For distance error metric</li> <li>sigma - leads to smoothness in force change</li> <li>dist - Euclidean dist between two elements</li> </ul> </li> <li>Force is calculated using \(Force = Ae^{(B-dist/sigma)}\), where \(f_x = Force * (dx / dist)\) and \(f_y = Force * (dy / dist)\) where dx and dy are x and y differences between the two car positions.</li> <li>This force is then used to decrease or increase the speed of the car as necessary, the way I have it set up is that the first car in the equation receives a negative force while the second one receives a positive force. This is basically done by \(v_{x1} -= fx\) and \(v_{y1} -= fy\) while \(v_{x2} += fx\) and \(v_{y2} += fy\)</li> </ul> </li> <li> <strong>Repulsion Forces Calculation between the car and wc:</strong> <ul> <li>Here the calculations are done the same way but only a negative force is implemented on the car velocities while the wc velocity is left unchanged.</li> <li>This force implementation can also be done with a static obstacle.</li> </ul> </li> <li> <strong>Attraction Force towards Goal:</strong> <ul> <li>Parameters –&gt; <ul> <li>K - Leads to a higher attraction towards the goal</li> <li>dx - x difference between goal and car location</li> <li>dy - y difference between goal and car location</li> <li>dist - Euclidean dist between goal and car</li> </ul> </li> <li>Here the velocity in x and y is calculated using \(v_x+=K*(dx/dist)\) and \(v_y+=K*(dy/dist)\)</li> </ul> </li> <li> <strong>Entire Social Forces Pipeline:</strong> <ul> <li>For every iteration, the repulsion forces are calculated between each car as well as between each car and the wheelchair as well as the attraction forces towards the goal. The overall velocity is then published to the cars. The parameters need to be set for a smooth interaction between all actors.</li> </ul> </li> </ul> </li> <li><strong>Sim implementation</strong></li> </ol> <ul> <li>A matplotlib simulation</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/matplotlib_sim.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <ul> <li>Between three cars starting in three different directions without any wheelchair (Using RVIZ and C++)</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/crowd_with_3_cars.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <ul> <li>Between three cars starting in three different directions with the wheelchair (Using RVIZ and C++)</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/Crowd_simulation_3_dir_moving_wc.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <ul> <li>Between three cars and the wheelchair where the cars approach the wheelchair head-on (Using RVIZ and C++)</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/crowd_approaching_wc.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <ul> <li>Between three cars and the wheelchair where the cars approach the wheelchair tangentially (Using RVIZ and C++)</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/crowd_tangential_wc.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <h5 id="ongoing-work"><strong>Ongoing Work</strong></h5> <ul> <li>Implementation on Real Robots</li> </ul> <h5 id="acknowledgements"><strong>Acknowledgements</strong></h5> <ul> <li>Larisa Loke</li> <li>Joel Goh</li> <li>Dr. Brenna Argall</li> </ul> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Shail Dalal. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?07b8786bab9b4abe90d10e61f7d12ff7" type="text/javascript"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>